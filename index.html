<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>トクビザ - システムアーキテクチャ説明書</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.8;
            margin: 0;
            padding: 20px;
            background-color: white;
            color: #000;
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            font-size: 2em;
            font-weight: normal;
            margin-bottom: 10px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        h2 {
            font-size: 1.5em;
            font-weight: normal;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        h3 {
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        p {
            margin-bottom: 15px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 40px;
        }
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .tech-card {
            padding: 15px;
            border: 1px solid #ddd;
        }
        .tech-card h3 {
            margin-top: 0;
        }
        .tech-card p {
            color: #666;
            font-size: 0.9em;
            margin: 0;
        }
        .architecture-diagram {
            margin: 30px 0;
            text-align: center;
        }
        .highlight {
            background-color: #000;
            color: white;
            padding: 2px 6px;
            font-weight: bold;
        }
        .note {
            background-color: #f5f5f5;
            border-left: 3px solid #000;
            padding: 15px;
            margin: 20px 0;
        }
        ul {
            line-height: 2;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li:before {
            content: "• ";
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>トクビザ - システムアーキテクチャ</h1>
    <div class="subtitle">Supabase × Next.js × Vercel × Modal による次世代特定技能採用プラットフォーム</div>

    <h2>プロジェクト概要</h2>
    <p>トクビザは、特定技能外国人の採用から雇用管理までをワンストップで支援する<span class="highlight">完全無料</span>のSaaSプラットフォームです。</p>

    <h2>システム全体アーキテクチャ</h2>
    <div class="architecture-diagram">
        <svg width="100%" height="450" viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg">
            <!-- Frontend Layer -->
            <g>
                <rect x="50" y="50" width="700" height="60" fill="none" stroke="#000" stroke-width="2"/>
                <text x="400" y="85" text-anchor="middle" fill="#000" font-size="18">Vercel (Next.js)</text>
            </g>
            
            <!-- API Layer -->
            <g>
                <rect x="50" y="150" width="340" height="60" fill="none" stroke="#666" stroke-width="1"/>
                <text x="220" y="185" text-anchor="middle" fill="#666" font-size="16">API Routes</text>
                
                <rect x="410" y="150" width="340" height="60" fill="#000" stroke="#000" stroke-width="2"/>
                <text x="580" y="185" text-anchor="middle" fill="white" font-size="16" font-weight="bold">Modal (PDF処理)</text>
            </g>
            
            <!-- Backend Layer -->
            <g>
                <rect x="50" y="250" width="700" height="60" fill="none" stroke="#000" stroke-width="2"/>
                <text x="400" y="285" text-anchor="middle" fill="#000" font-size="18">Supabase</text>
            </g>
            
            <!-- Database Components -->
            <g>
                <rect x="50" y="350" width="160" height="50" fill="none" stroke="#666" stroke-width="1"/>
                <text x="130" y="380" text-anchor="middle" fill="#666" font-size="14">PostgreSQL</text>
                
                <rect x="230" y="350" width="160" height="50" fill="none" stroke="#666" stroke-width="1"/>
                <text x="310" y="380" text-anchor="middle" fill="#666" font-size="14">Auth</text>
                
                <rect x="410" y="350" width="160" height="50" fill="none" stroke="#666" stroke-width="1"/>
                <text x="490" y="380" text-anchor="middle" fill="#666" font-size="14">Storage</text>
                
                <rect x="590" y="350" width="160" height="50" fill="none" stroke="#666" stroke-width="1"/>
                <text x="670" y="380" text-anchor="middle" fill="#666" font-size="14">RLS</text>
            </g>
            
            <!-- Arrows -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
            </defs>
            
            <line x1="400" y1="110" x2="400" y2="150" stroke="#333" stroke-width="1" marker-end="url(#arrowhead)"/>
            <line x1="220" y1="210" x2="220" y2="250" stroke="#333" stroke-width="1" marker-end="url(#arrowhead)"/>
            <line x1="580" y1="210" x2="580" y2="250" stroke="#333" stroke-width="1" marker-end="url(#arrowhead)"/>
            <line x1="400" y1="310" x2="400" y2="350" stroke="#333" stroke-width="1" marker-end="url(#arrowhead)"/>
        </svg>
    </div>

    <h2>Supabase - バックエンドインフラ</h2>
    <p>オープンソースのBaaS（Backend as a Service）として、トクビザの基盤を支えています。</p>
    
    <div class="tech-stack">
        <div class="tech-card">
            <h3>PostgreSQL</h3>
            <p>特定技能外国人データの安全な保管</p>
        </div>
        <div class="tech-card">
            <h3>認証システム</h3>
            <p>企業・外国人のセキュアなログイン管理</p>
        </div>
        <div class="tech-card">
            <h3>Row Level Security</h3>
            <p>企業ごとのデータ分離とセキュリティ</p>
        </div>
        <div class="tech-card">
            <h3>ストレージ</h3>
            <p>書類・画像の安全な保管</p>
        </div>
    </div>

    <h2>Next.js - フロントエンドフレームワーク</h2>
    <p>React基盤の最新フルスタックフレームワークで、高速でSEOに強いアプリケーションを構築。</p>
    
    <div class="tech-stack">
        <div class="tech-card">
            <h3>App Router</h3>
            <p>最新のルーティングシステムで直感的なURL設計</p>
        </div>
        <div class="tech-card">
            <h3>Server Components</h3>
            <p>サーバーサイドレンダリングで高速表示</p>
        </div>
        <div class="tech-card">
            <h3>TypeScript</h3>
            <p>型安全性による堅牢な開発</p>
        </div>
        <div class="tech-card">
            <h3>Tailwind CSS</h3>
            <p>効率的なスタイリングシステム</p>
        </div>
    </div>

    <h2>Vercel - ホスティング&デプロイメント</h2>
    <p>Next.jsに最適化された高速なデプロイメントプラットフォーム。</p>
    
    <div class="tech-stack">
        <div class="tech-card">
            <h3>自動デプロイ</h3>
            <p>GitHubプッシュで即座に本番環境へ反映</p>
        </div>
        <div class="tech-card">
            <h3>プレビュー環境</h3>
            <p>PRごとに独立した検証環境を自動生成</p>
        </div>
        <div class="tech-card">
            <h3>エッジネットワーク</h3>
            <p>世界中どこからでも高速アクセス</p>
        </div>
        <div class="tech-card">
            <h3>Analytics</h3>
            <p>パフォーマンス監視と最適化</p>
        </div>
    </div>

    <h2>Modal - PDF処理専用サーバー</h2>
    <p>特定技能に必要な40種類以上の書類をPythonで高速自動生成するサーバーレス基盤。</p>
    
    <div class="tech-stack">
        <div class="tech-card">
            <h3>Python実装</h3>
            <p>PDFライブラリを活用した柔軟な書類生成</p>
        </div>
        <div class="tech-card">
            <h3>オンデマンド実行</h3>
            <p>必要な時だけ起動しコストを最適化</p>
        </div>
        <div class="tech-card">
            <h3>高速処理</h3>
            <p>複雑な書類も数秒で生成完了</p>
        </div>
        <div class="tech-card">
            <h3>スケーラブル</h3>
            <p>同時に大量の書類生成リクエストにも対応</p>
        </div>
    </div>

    <h2>技術スタックのメリット</h2>
    <div class="note">
        <ul>
            <li><strong>開発速度：</strong>Supabaseの統合機能とNext.jsのフルスタック機能により、迅速な機能開発が可能</li>
            <li><strong>スケーラビリティ：</strong>VercelとModalの組み合わせで、ユーザー数の増加に自動対応</li>
            <li><strong>コスト効率：</strong>サーバーレスアーキテクチャにより、使った分だけの課金で運用コストを最適化</li>
            <li><strong>セキュリティ：</strong>Supabaseの RLS とNext.jsの型安全性により、堅牢なシステムを実現</li>
        </ul>
    </div>
</body>
</html>